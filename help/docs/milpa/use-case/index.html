<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
<head lang="en">
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en">
  <meta property="og:title" content="milpa help docs milpa use-case">
  <meta property="og:site_name" content="üåΩ milpa">
  <meta property="og:description" content="Use-cases and alternatives when using milpa">
  <meta name="description" content="Use-cases and alternatives when using milpa">
  <meta property="og:url" content="https://milpa.dev/help/docs/milpa/use-case">
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
  <title>milpa help docs milpa use-case</title>
  <link rel="preload" as="font" href="https://cdn.rob.mx/fonts/AesteticoLightItalic.woff2">
  <link rel="preload" as="font" href="https://cdn.rob.mx/fonts/AesteticoLight.woff2">
  <link rel="preload" as="font" href="https://cdn.rob.mx/fonts/AesteticoBold.woff2">
  <link rel="preload" as="font" href="https://cdn.rob.mx/fonts/AesteticoBoldItalic.woff2">
  <link rel="canonical" href="https://milpa.dev/help/docs/milpa/use-case">
  <link rel="stylesheet" href="/static/css/highlight-light.css">
  <link rel="stylesheet" href="/static/css/highlight-dark.css">
  <link rel="stylesheet" href="/static/css/index.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="//fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;700&amp;display=swap" rel="preload" as="style">
  <link href="//fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;700&amp;display=swap" rel="stylesheet" media="print" onload="this.media='all'"><noscript>
  <link rel="stylesheet" href="//fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;700&amp;display=swap"></noscript>
</head>
<body>
  <header role="banner">
    <a tabindex="0" id="skip-to-content" class="sr-only" href="#content">Skip to content</a>
    <h1 lang="es"><a aria-label="Go to the home page" class="emoji-maiz" href="/">milpa</a></h1><input list="milpa-commands" placeholder="type a milpa command" type="text" aria-label="milpa command selector" id="command-selector" pattern='|help|help docs|help docs milpa|help docs milpa changelog|help docs milpa command|help docs milpa command spec|help docs milpa environment|help docs milpa internals|help docs milpa quick-guide|help docs milpa repo|help docs milpa repo docs|help docs milpa repo hooks|help docs milpa support|help docs milpa use-case|help docs milpa util|help docs milpa util log|help docs milpa util repo|help docs milpa util shell|help docs milpa util tmp|help docs milpa util user-input|itself|itself command-tree|itself create|itself doctor|itself install-autocomplete|itself repo|itself repo install|itself repo list|itself repo uninstall|itself upgrade|itself version' value="help docs milpa use-case"> <datalist id="milpa-commands">
      <option value="help">
      </option>
      <option value="help docs">
      </option>
      <option value="help docs milpa">
      </option>
      <option value="help docs milpa quick-guide">
      </option>
      <option value="help docs milpa use-case">
      </option>
      <option value="help docs milpa environment">
      </option>
      <option value="help docs milpa repo">
      </option>
      <option value="help docs milpa repo docs">
      </option>
      <option value="help docs milpa repo hooks">
      </option>
      <option value="help docs milpa command">
      </option>
      <option value="help docs milpa command spec">
      </option>
      <option value="help docs milpa util">
      </option>
      <option value="help docs milpa util log">
      </option>
      <option value="help docs milpa util repo">
      </option>
      <option value="help docs milpa util shell">
      </option>
      <option value="help docs milpa util tmp">
      </option>
      <option value="help docs milpa util user-input">
      </option>
      <option value="help docs milpa internals">
      </option>
      <option value="help docs milpa support">
      </option>
      <option value="help docs milpa changelog">
      </option>
      <option value="itself">
      </option>
      <option value="itself command-tree">
      </option>
      <option value="itself create">
      </option>
      <option value="itself doctor">
      </option>
      <option value="itself install-autocomplete">
      </option>
      <option value="itself repo">
      </option>
      <option value="itself repo install">
      </option>
      <option value="itself repo list">
      </option>
      <option value="itself repo uninstall">
      </option>
      <option value="itself upgrade">
      </option>
      <option value="itself version">
      </option>
    </datalist> <button id="menu-toggle" aria-label="Toggle navigation menu"><svg version="1.1" viewbox="0 0 310 259.34" xmlns="http://www.w3.org/2000/svg">
    <title>Menu Icon</title>
    <g transform="translate(10.016 -803.03)">
      <g fill="none" stroke="#000" stroke-linecap="round" stroke-width="49.336">
        <path d="m19.668 1032.7h250.65"></path>
        <path d="m19.668 932.69h250.65"></path>
        <path d="m19.668 832.69h250.65"></path>
      </g>
    </g></svg></button>
  </header>
  <div id="sidebar" aria-hidden="false">
    <nav id="table-of-contents" aria-labelledby="toc-header">
      <span class="heading" id="toc-header">In this page</span>
      <ul>
        <li>
          <a href="#milpa-is-great-for"><code>milpa</code> is great for</a>
          <ul>
            <li>
              <a href="#examples">Examples</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="#where-milpa-wont-shine">Where <code>milpa</code> won't shine</a>
        </li>
        <li>
          <a href="#alternatives-to-milpa">Alternatives to <code>milpa</code></a>
          <ul>
            <li>
              <a href="#regular-scripts-in-the-filesystem">Regular scripts in the filesystem</a>
            </li>
            <li>
              <a href="#other-command-launchers">Other command launchers</a>
            </li>
            <li>
              <a href="#make">Make</a>
            </li>
            <li>
              <a href="#byocli">BYOCLI</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
    <nav id="commands" aria-labelledby="commands-header">
      <span class="heading" id="commands-header">Commands</span>
      <ul>
        <li>
          <a href="/help/" class="command-menu-selected-prefix">help</a>
          <ul class="sub-menu" aria-label="help subcommands">
            <li>
              <a href="/help/docs/" class="command-menu-selected-prefix">docs</a>
              <ul class="sub-menu" aria-label="docs subcommands">
                <li>
                  <a href="/help/docs/milpa/" class="command-menu-selected-prefix">milpa</a>
                  <ul class="sub-menu" aria-label="milpa subcommands">
                    <li>
                      <a href="/help/docs/milpa/quick-guide/" class="">quick-guide</a>
                    </li>
                    <li><strong class="command-menu-selected-prefix">use-case</strong></li>
                    <li>
                      <a href="/help/docs/milpa/environment/" class="">environment</a>
                    </li>
                    <li>
                      <a href="/help/docs/milpa/repo/" class="">repo</a>
                      <ul class="sub-menu" aria-label="repo subcommands">
                        <li>
                          <a href="/help/docs/milpa/repo/docs/" class="">docs</a>
                        </li>
                        <li>
                          <a href="/help/docs/milpa/repo/hooks/" class="">hooks</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="/help/docs/milpa/command/" class="">command</a>
                      <ul class="sub-menu" aria-label="command subcommands">
                        <li>
                          <a href="/help/docs/milpa/command/spec/" class="">spec</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="/help/docs/milpa/util/" class="">util</a>
                      <ul class="sub-menu" aria-label="util subcommands">
                        <li>
                          <a href="/help/docs/milpa/util/log/" class="">log</a>
                        </li>
                        <li>
                          <a href="/help/docs/milpa/util/repo/" class="">repo</a>
                        </li>
                        <li>
                          <a href="/help/docs/milpa/util/shell/" class="">shell</a>
                        </li>
                        <li>
                          <a href="/help/docs/milpa/util/tmp/" class="">tmp</a>
                        </li>
                        <li>
                          <a href="/help/docs/milpa/util/user-input/" class="">user-input</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="/help/docs/milpa/internals/" class="">internals</a>
                    </li>
                    <li>
                      <a href="/help/docs/milpa/support/" class="">support</a>
                    </li>
                    <li>
                      <a href="/help/docs/milpa/changelog/" class="">changelog</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <a href="/itself/" class="">itself</a>
          <ul class="sub-menu" aria-label="itself subcommands">
            <li>
              <a href="/itself/command-tree/" class="">command-tree</a>
            </li>
            <li>
              <a href="/itself/create/" class="">create</a>
            </li>
            <li>
              <a href="/itself/doctor/" class="">doctor</a>
            </li>
            <li>
              <a href="/itself/install-autocomplete/" class="">install-autocomplete</a>
            </li>
            <li>
              <a href="/itself/repo/" class="">repo</a>
              <ul class="sub-menu" aria-label="repo subcommands">
                <li>
                  <a href="/itself/repo/install/" class="">install</a>
                </li>
                <li>
                  <a href="/itself/repo/list/" class="">list</a>
                </li>
                <li>
                  <a href="/itself/repo/uninstall/" class="">uninstall</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="/itself/upgrade/" class="">upgrade</a>
            </li>
            <li>
              <a href="/itself/version/" class="">version</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
  <main id="content">
    <h1 id="command-name-header" class="sr-only">milpa help docs milpa use-case</h1>
    <p>I built <code>milpa</code> with a few use cases in mind:</p>
    <ul>
      <li>To <strong>share groups of scripts</strong> like those needed by folks in an engineering team (i.e. setup development environments, work with secrets/credentials)</li>
      <li>to <strong>share context and code</strong>, without having to ask folks to run stuff off READMEs (i.e. pull service logs, forward ports), and</li>
      <li>to <strong>quickly build scripts</strong> that will be documented sufficiently well for my forgetful future-self.</li>
    </ul>
    <p>My goal with <code>milpa</code> is to make following the <a href="https://clig.dev">Command Line Interface Guidelines</a> require as little effort as possible.</p>
    <div class="content-header-wrapper">
      <h2 class="content-header" id="milpa-is-great-for"><code>milpa</code> is great for</h2><a aria-hidden="true" class="heading-anchor" href="#milpa-is-great-for" tabindex="-1">#</a>
    </div>
    <ul>
      <li>working with small programs meant to be used as either building blocks for other programs, or user-facing collections of these blocks;</li>
      <li>sharing related commands using your team's source control versioning system, allowing anyone to mess with them and test them often;</li>
      <li>when writing shell scripts is the way to go. Maybe you're interacting with binaries in the system, or operating on files and directories and using your programming language of choice is overkill; and</li>
      <li>turning runbooks into actionable, runnable scripts. Up-to-date remediation one <code>git pull &amp;& milpa runbook ...</code> away.</li>
    </ul>
    <p>Tasks like bootstrapping development environments are usually left out for the user to accomplish by following through a README or wiki with likely outdated links; <code>milpa</code> is great when these tasks can be accomplished by prompting for information, querying identity providers and then running configuration commands or modifying the filesystem directly.</p>
    <blockquote>
      <p>‚ö†Ô∏è <code>milpa</code> is still under development and is currently on alpha!</p>
    </blockquote>
    <div class="content-header-wrapper">
      <h3 class="content-header" id="examples">Examples</h3><a aria-hidden="true" class="heading-anchor" href="#examples" tabindex="-1">#</a>
    </div>
    <p>Here's some examples of how I've used used <code>milpa</code> so far:</p>
    <ul>
      <li>for <strong>managing homelab services</strong> (i.e. <a href="https://github.com/unRob/nidito/tree/master/.milpa">unRob/nidito</a>): building and deploying them, looking at their status and logs. From my personal device or CI.
      </li>
      <li>
        <strong>bootstrapping engineering laptops</strong> (i.e. <a href="https://github.com/unRob/dotfiles/tree/master/.milpa/commands/computar">unRob/dotfiles</a>): no need to follow a README, you get the right development environment for your os/arch, your credentials setup and the code ready for you to dive in.
      </li>
      <li>
        <strong>every-day dev workflow</strong> (i.e. <a href="https://github.com/unRob/milpa/tree/main/repos/internal/commands/">unRob/milpa</a>): lint and test a codebase, connect to vpn, get credentials to resources, maybe <code>--connect</code> to them, abstract away APIs (internal, cloud provider and SaaS) and CLIs, toggle feature gates, build reports and update google sheets with the results.
      </li>
      <li>as a way to organize all those odd, one-off-but-not-really commands: found a nice home for <a href="https://github.com/unRob/dotfiles/blob/master/.milpa/commands/code/todo.sh">shell scripts</a>, quick ruby scripts, perl hacks and <a href="https://github.com/unRob/dotfiles/blob/master/.milpa/commands/creds.sh">jq monstrosities</a> that used to live in my <code>~/.zsh_history</code>.
      </li>
    </ul>
    <p>I found <code>milpa</code> useful for these particular problems, since it only requires Bash and a supported OS/arch. <code>milpa</code> helps setup the computers I use (directly or remotely) and makes working with whatever languages my employer prefers (today and beyond) a breeze to integrate into a cohesive set of scripts. <code>milpa</code> takes care of parsing, validation, offering help when things go sideways, and so on, so these small scripts remain just so: <em>small scripts</em>.</p>
    <div class="content-header-wrapper">
      <h2 class="content-header" id="where-milpa-wont-shine">Where <code>milpa</code> won't shine</h2><a aria-hidden="true" class="heading-anchor" href="#where-milpa-wont-shine" tabindex="-1">#</a>
    </div>
    <p>I haven't tested the performance beyond dozens of repos with dozens of commands, and that being said, I can't see myself using <code>milpa</code> for anything more complex than that. I'd usually reach for another language to build a domain-specific CLI, specially if working with a team that is not very comfortable with shell scripting.</p>
    <p>When there's a need to distribute stand-alone CLI programs, <code>milpa</code> won't be the best method to package and distribute CLIs. While facilities to work with <code>milpa</code> repos exists (see <a href="/itself/repo/install"><code>milpa itself repo install</code></a>), it may be less than ideal since there's a dependency in <code>milpa</code>.</p>
    <p><code>milpa</code> could be the wrong tool when the primary runner of commands is not gonna be a human. Sorry robot friends! <code>milpa</code>'s features are oriented primarily towards improving the experience of maintaining and running scripts by humans, and while there's nothing wrong with having an automated system (say CI, for example) run <code>milpa</code> commands, there is an overhead to consider (both cognitive, and in terms of resource usage).</p>
    <p>That being said, it can be done and it works fine (or, if you like writing bash scripts as much as I do, <em>beautifully</em>); check out <a href="https://github.com/unRob/smoked-by-the-house">unRob/smoked-by-the-house</a> where <code>milpa</code> orchestrated and operated a Raspberry Pi running an art installation for three months of 2022 at the Anahuacalli Museum in Mexico City.</p>
    <div class="content-header-wrapper">
      <h2 class="content-header" id="alternatives-to-milpa">Alternatives to <code>milpa</code></h2><a aria-hidden="true" class="heading-anchor" href="#alternatives-to-milpa" tabindex="-1">#</a>
    </div>
    <div class="content-header-wrapper">
      <h3 class="content-header" id="regular-scripts-in-the-filesystem">Regular scripts in the filesystem</h3><a aria-hidden="true" class="heading-anchor" href="#regular-scripts-in-the-filesystem" tabindex="-1">#</a>
    </div>
    <p>These are great, as long as: a) you know the path to your script, b) it doesn't consume many arguments/options, c) rarely changes, and/or d) is used only by the same few folks.</p>
    <p><code>milpa</code> provides usability advantages over this approach which will come handy when any of the constraints listed before are not met. With <code>milpa</code>, scripts that change often get updated docs and autocomplete for free, and may be appreciated by new users and non-regulars alike. Coming back to rarely used commands is one <code>--help</code> away when these scripts are part of a <code>milpa</code> repo.</p>
    <div class="content-header-wrapper">
      <h3 class="content-header" id="other-command-launchers">Other command launchers</h3><a aria-hidden="true" class="heading-anchor" href="#other-command-launchers" tabindex="-1">#</a>
    </div>
    <p>There's some amazing tools out there, such as:</p>
    <ul>
      <li>
        <a href="https://github.com/pforret/bashew">Bashew</a>
      </li>
      <li>
        <a href="http://bashinator.org/">Bashinator</a>
      </li>
      <li>
        <a href="http://rerun.github.io/rerun/">Rerun</a>
      </li>
      <li>
        <a href="https://github.com/basecamp/sub">Sub</a>
      </li>
      <li>
        <a href="https://github.com/basherpm/basher">Basher package manager</a>
      </li>
      <li>
        <a href="https://github.com/criteo/command-launcher">Criteo's command-launcher</a>
      </li>
    </ul>
    <p>These all serve different purposes, and there is some feature overlap between <code>milpa</code> and each of these.</p>
    <p><code>milpa</code> aims to provide the same level of support to non-bash scripts (hello applescript) without the need for another runtime to be installed. These projects are great for distributing and packaging software that may be used beyond your organization, while <code>milpa</code> aims to help smaller user bases, such as engineering teams, keep their shared scripts organized and up-to-date.</p>
    <div class="content-header-wrapper">
      <h3 class="content-header" id="make">Make</h3><a aria-hidden="true" class="heading-anchor" href="#make" tabindex="-1">#</a>
    </div>
    <p>Make is great! I love using <code>make</code> for building artifacts, but given enough time, I'll always end up hacking around it and wishing I had all of Make's strengths and the expressiveness of bash. I used <code>make</code> to build <code>milpa</code> initially since it's really a great tool, has a huge user base and flavors of it produce software used by millions.</p>
    <p>That being said, organizing makefiles and dealing with arguments is not something I can say I enjoy, and producing anything other than artifacts to the filesystem with Make doesn't feel right to me. <code>milpa</code> can be a good companion to Make workflows, and fill in the gaps upstream or downstream of <code>make</code>.</p>
    <div class="content-header-wrapper">
      <h3 class="content-header" id="byocli">BYOCLI</h3><a aria-hidden="true" class="heading-anchor" href="#byocli" tabindex="-1">#</a>
    </div>
    <p>Building your own CLI is usually what ends up happening given a team with enough time and direction to invest in building a proper CLI with whatever language is already at use. Some teams use more than one language, which may complicate this approach. In the microservices world, many codebases come with their own CLIs that may follow slightly different conventions, are seldomly documented and often just end up calling other binaries through <code>exec</code>.</p>
    <p>In my limited experience with engineering teams of less than 300 folks, many of the bootstrapping tasks will involve operations that can easily (and more succinctly) be expressed with a shell scripting language. <code>milpa</code> could also be a useful intermediate step, that could help teams avoid the dread of confluence/notion/google-docs runbooks until it's a good time to build your own CLI.</p>
    <p>Building a CLI is something that happens to me somewhat often, and when golang is a good choice, I get most of <code>milpa</code>'s niceties by building my CLI on <a href="https://git.rob.mx/nidito/chinampa">chinampa</a>. <code>joao</code>, a configuration manager, is an example of something that started as a <a href="https://github.com/unRob/nidito/tree/0812e0caf6d81dd06b740701c3e95a2aeabd86de/.milpa/commands/nidito/config">milpa repo</a> that later became <a href="https://git.rob.mx/nidito/joao">it's own CLI</a>; getting it to work with <code>milpa</code> first was fundamental in figuring out <em>what</em> it needed to do, and it only took a few hours.</p>
  </main>
  <script src="/static/js/index.js"></script>
</body>
</html>
